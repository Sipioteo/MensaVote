{"version":3,"file":"3-c5f4660d.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/auth/redirect/_page.server.js","../../../.svelte-kit/adapter-node/nodes/3.js"],"sourcesContent":["import { b as private_env } from \"../../../../chunks/shared-server.js\";\nasync function load({ url }) {\n  if (!url.searchParams.has(\"code\")) {\n    return {};\n  }\n  let authEndpoints = await retrieveAuthEndpoints();\n  let tokenBody = new URLSearchParams();\n  tokenBody.append(\"grant_type\", \"authorization_code\");\n  tokenBody.append(\"client_id\", private_env.CLIENT_ID || \"212205468813164598@website\");\n  tokenBody.append(\n    \"client_secret\",\n    private_env.CLIENT_SECRET || \"ZhTynXTX2q5onLbwS0qhyFvh8LymZkw4ZyhQ71K7XE7mQfEZDLvMNP7wZShkLHEP\"\n  );\n  tokenBody.append(\"redirect_uri\", `${private_env.BASE_URL || \"http://localhost:5173\"}/auth/redirect`);\n  tokenBody.append(\"code\", url.searchParams.get(\"code\") || \"\");\n  let tokenResponse = await fetch(authEndpoints.token_endpoint, {\n    method: \"POST\",\n    body: tokenBody,\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    }\n  });\n  let token = await tokenResponse.json();\n  let userResponse = await fetch(authEndpoints.userinfo_endpoint, {\n    headers: {\n      Authorization: `Bearer ${token.access_token}`\n    }\n  });\n  let userData = await userResponse.json();\n  return {\n    token,\n    user_data: userData\n  };\n}\nasync function retrieveAuthEndpoints() {\n  let response = await fetch(\n    `${private_env.AUTH_URL || \"https://authmensa.luminos.dev\"}/.well-known/openid-configuration`\n  );\n  let data = await response.json();\n  return data;\n}\nexport {\n  load\n};\n","import * as server from '../entries/pages/auth/redirect/_page.server.js';\n\nexport const index = 3;\nexport const component = async () => (await import('../entries/pages/auth/redirect/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/auth/redirect/+page.server.js\";\nexport const imports = [\"_app/immutable/entry/auth-redirect-page.svelte.ab8d149b.js\",\"_app/immutable/chunks/index.1a09564c.js\",\"_app/immutable/chunks/store.669eface.js\",\"_app/immutable/chunks/index.36402250.js\"];\nexport const stylesheets = [\"_app/immutable/assets/_page.ee3a75c9.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;AACA,eAAe,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE;AAC7B,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;AACrC,IAAI,OAAO,EAAE,CAAC;AACd,GAAG;AACH,EAAE,IAAI,aAAa,GAAG,MAAM,qBAAqB,EAAE,CAAC;AACpD,EAAE,IAAI,SAAS,GAAG,IAAI,eAAe,EAAE,CAAC;AACxC,EAAE,SAAS,CAAC,MAAM,CAAC,YAAY,EAAE,oBAAoB,CAAC,CAAC;AACvD,EAAE,SAAS,CAAC,MAAM,CAAC,WAAW,EAAE,WAAW,CAAC,SAAS,IAAI,4BAA4B,CAAC,CAAC;AACvF,EAAE,SAAS,CAAC,MAAM;AAClB,IAAI,eAAe;AACnB,IAAI,WAAW,CAAC,aAAa,IAAI,kEAAkE;AACnG,GAAG,CAAC;AACJ,EAAE,SAAS,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,EAAE,WAAW,CAAC,QAAQ,IAAI,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC;AACvG,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;AAC/D,EAAE,IAAI,aAAa,GAAG,MAAM,KAAK,CAAC,aAAa,CAAC,cAAc,EAAE;AAChE,IAAI,MAAM,EAAE,MAAM;AAClB,IAAI,IAAI,EAAE,SAAS;AACnB,IAAI,OAAO,EAAE;AACb,MAAM,cAAc,EAAE,mCAAmC;AACzD,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,KAAK,GAAG,MAAM,aAAa,CAAC,IAAI,EAAE,CAAC;AACzC,EAAE,IAAI,YAAY,GAAG,MAAM,KAAK,CAAC,aAAa,CAAC,iBAAiB,EAAE;AAClE,IAAI,OAAO,EAAE;AACb,MAAM,aAAa,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;AACnD,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,IAAI,QAAQ,GAAG,MAAM,YAAY,CAAC,IAAI,EAAE,CAAC;AAC3C,EAAE,OAAO;AACT,IAAI,KAAK;AACT,IAAI,SAAS,EAAE,QAAQ;AACvB,GAAG,CAAC;AACJ,CAAC;AACD,eAAe,qBAAqB,GAAG;AACvC,EAAE,IAAI,QAAQ,GAAG,MAAM,KAAK;AAC5B,IAAI,CAAC,EAAE,WAAW,CAAC,QAAQ,IAAI,+BAA+B,CAAC,iCAAiC,CAAC;AACjG,GAAG,CAAC;AACJ,EAAE,IAAI,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;AACnC,EAAE,OAAO,IAAI,CAAC;AACd;;;;;;;ACtCY,MAAC,KAAK,GAAG,EAAE;AACX,MAAC,SAAS,GAAG,YAAY,CAAC,MAAM,OAAO,4BAAgD,CAAC,EAAE,QAAQ;AAElG,MAAC,SAAS,GAAG,2CAA2C;AACxD,MAAC,OAAO,GAAG,CAAC,4DAA4D,CAAC,yCAAyC,CAAC,yCAAyC,CAAC,yCAAyC,EAAE;AACxM,MAAC,WAAW,GAAG,CAAC,0CAA0C,EAAE;AAC5D,MAAC,KAAK,GAAG;;;;"}